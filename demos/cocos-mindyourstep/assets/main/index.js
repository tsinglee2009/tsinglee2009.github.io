System.register("chunks:///_virtual/PlayerController.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,i,o,s,n,r,u,p,a,c,h,m,_,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.defineProperty,s=t.assertThisInitialized,n=t.initializerDefineProperty},function(t){r=t.cclegacy,u=t._decorator,p=t.SkeletalAnimation,a=t.Camera,c=t.Vec3,h=t.input,m=t.Input,_=t.KeyCode,l=t.Component}],execute:function(){var d,y,P,f,C,v,S;r._RF.push({},"547880mujJMFLtDRb39ok3Q","PlayerController",void 0);var J=u.ccclass,M=u.property;t("PlayerController",(d=J("PlayerController"),y=M({type:p}),P=M({type:a}),d((v=e((C=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),u=0;u<i;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,o(s(e),"_startJump",!1),o(s(e),"_jumpStep",0),o(s(e),"_curJumpTime",0),o(s(e),"_jumpTime",.3),o(s(e),"_curJumpSpeed",0),o(s(e),"_curPos",new c),o(s(e),"_deltaPos",new c(0,0,0)),o(s(e),"_targetPos",new c),o(s(e),"_curMoveIndex",0),n(s(e),"CocosAnim",v,s(e)),n(s(e),"MainCamera",S,s(e)),e}i(e,t);var r=e.prototype;return r.start=function(){},r.reset=function(){this._curMoveIndex=0,c.zero(this._curPos),this.node.setPosition(this._curPos),this.syncCamera()},r.syncCamera=function(){if(this.MainCamera){var t=this.MainCamera.node.getPosition();c.set(t,this._curPos.x,t.y,t.z),this.MainCamera.node.setPosition(t)}},r.setInputActive=function(t){t?(h.on(m.EventType.MOUSE_UP,this.onMouseUp,this),h.on(m.EventType.KEY_UP,this.onKeyUp,this)):(h.off(m.EventType.MOUSE_UP,this.onMouseUp,this),h.off(m.EventType.KEY_UP,this.onKeyUp,this))},r.onMouseUp=function(t){0===t.getButton()?this.jumpByStep(1):2===t.getButton()&&this.jumpByStep(2)},r.onKeyUp=function(t){t.keyCode===_.ESCAPE&&this.reset()},r.jumpByStep=function(t){this._startJump||(this._startJump=!0,this._jumpStep=t,this._curJumpTime=0,this._curJumpSpeed=this._jumpStep/this._jumpTime,this.node.getPosition(this._curPos),c.add(this._targetPos,this._curPos,new c(this._jumpStep,0,0)),this.CocosAnim&&(this.CocosAnim.getState("cocos_anim_jump").speed=3.5,this.CocosAnim.play("cocos_anim_jump")))},r.onOnceJumpEnd=function(){this.CocosAnim&&this.CocosAnim.play("cocos_anim_idle"),this.node.emit("JumpEnd",this._curMoveIndex)},r.update=function(t){this._startJump&&(this._curJumpTime+=t,this._curJumpTime>this._jumpTime?(this.node.setPosition(this._targetPos),this._startJump=!1,this._curMoveIndex+=this._jumpStep,this.onOnceJumpEnd()):(this.node.getPosition(this._curPos),this._deltaPos.x=this._curJumpSpeed*t,c.add(this._curPos,this._curPos,this._deltaPos),this.node.setPosition(this._curPos)),this.syncCamera())},e}(l)).prototype,"CocosAnim",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(C.prototype,"MainCamera",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=C))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./PlayerController.ts"],(function(t){"use strict";var e,r,n,i,a,s,o,l,u,c,h,p,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.createClass,i=t.initializerDefineProperty,a=t.assertThisInitialized,s=t.defineProperty},function(t){o=t.cclegacy,l=t._decorator,u=t.Node,c=t.Prefab,h=t.Label,p=t.instantiate,f=t.Component},function(t){d=t.PlayerController}],execute:function(){var _,y,b,N,g,S,T,G,v,I,L,P;o._RF.push({},"76d431hFFxJ6K8hWuZ25PqU","GameManager",void 0);var m,B,C=l.ccclass,E=l.property;!function(t){t[t.BT_NONE=0]="BT_NONE",t[t.BT_STONE=1]="BT_STONE"}(m||(m={})),function(t){t[t.GS_INIT=0]="GS_INIT",t[t.GS_PLAYING=1]="GS_PLAYING",t[t.GS_END=2]="GS_END"}(B||(B={}));t("GameManager",(_=C("GameManager"),y=E({type:d}),b=E({type:u}),N=E({type:c}),g=E({type:h}),_((G=e((T=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e=t.call.apply(t,[this].concat(n))||this,i(a(e),"playerCtrl",G,a(e)),i(a(e),"startMenu",v,a(e)),i(a(e),"cubePrfb",I,a(e)),i(a(e),"stepsLabel",L,a(e)),i(a(e),"roadLength",P,a(e)),s(a(e),"_road",[]),e}r(e,t);var o=e.prototype;return o.start=function(){var t;this.curState=B.GS_INIT,this.stepsLabel.string="0",null===(t=this.playerCtrl)||void 0===t||t.node.on("JumpEnd",this.onPlayerJumpEnd,this)},o.init=function(){this.startMenu&&(this.startMenu.active=!0),this.generateRoad(),this.playerCtrl&&(this.playerCtrl.setInputActive(!1),this.playerCtrl.reset())},o.onStartButtonClicked=function(){this.curState=B.GS_PLAYING},o.generateRoad=function(){this.node.removeAllChildren(),this._road=[],this._road.push(m.BT_STONE);for(var t=1;t<this.roadLength;t++)this._road[t-1]===m.BT_NONE?this._road.push(m.BT_STONE):this._road.push(Math.floor(2*Math.random()));for(var e=0;e<this._road.length;e++){var r=this.spawnBlockByType(this._road[e]);r&&(this.node.addChild(r),r.setPosition(e,-1.5,0))}},o.spawnBlockByType=function(t){if(!this.cubePrfb)return null;var e=null;switch(t){case m.BT_STONE:e=p(this.cubePrfb)}return e},o.checkResult=function(t){t<this.roadLength?this._road[t]==m.BT_NONE&&(this.curState=B.GS_INIT):this.curState=B.GS_INIT},o.onPlayerJumpEnd=function(t){this.stepsLabel&&(this.stepsLabel.string=""+(t>=this.roadLength?this.roadLength:t)),this.checkResult(t)},n(e,[{key:"curState",set:function(t){var e=this;switch(t){case B.GS_INIT:this.init();break;case B.GS_PLAYING:this.startMenu&&(this.startMenu.active=!1),this.stepsLabel.string="0",setTimeout((function(){e.playerCtrl&&e.playerCtrl.setInputActive(!0)}),.1);break;case B.GS_END:}}}]),e}(f)).prototype,"playerCtrl",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(T.prototype,"startMenu",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(T.prototype,"cubePrfb",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(T.prototype,"stepsLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(T.prototype,"roadLength",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),S=T))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./PlayerController.ts","./GameManager.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});